<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Red Sea Tire - Find Your Perfect Tires</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #c62828 0%, #1565c0 50%, #0277bd 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
            padding: 30px 0;
            position: relative;
        }

        header h1 {
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        /* Shopping Cart Button */
        .cart-button {
            position: fixed;
            top: 30px;
            right: 30px;
            background: white;
            color: #c62828;
            border: none;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            font-size: 28px;
            cursor: pointer;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            transition: all 0.3s;
            z-index: 1001;
        }

        .cart-button:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 30px rgba(0,0,0,0.4);
        }

        .cart-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #c62828;
            color: white;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
        }

        .filters {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 30px;
            border-top: 4px solid #c62828;
        }

        .filters h2 {
            color: #c62828;
            margin-bottom: 20px;
            font-size: 1.5em;
        }

        .filter-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .filter-item {
            display: flex;
            flex-direction: column;
        }

        .filter-item label {
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
            font-size: 0.95em;
        }

        .filter-item select,
        .filter-item input {
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1em;
            transition: all 0.3s;
        }

        .filter-item select:focus,
        .filter-item input:focus {
            outline: none;
            border-color: #c62828;
            box-shadow: 0 0 0 3px rgba(198, 40, 40, 0.1);
        }

        .filter-buttons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background: linear-gradient(135deg, #c62828, #d32f2f);
            color: white;
            flex: 1;
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, #b71c1c, #c62828);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(198, 40, 40, 0.4);
        }

        .btn-secondary {
            background: #e0e0e0;
            color: #333;
        }

        .btn-secondary:hover {
            background: #d0d0d0;
        }

        .btn-add-cart {
            background: linear-gradient(135deg, #1565c0, #0277bd);
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-add-cart:hover {
            background: linear-gradient(135deg, #0d47a1, #01579b);
            transform: translateY(-2px);
        }

        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            color: white;
        }

        .results-count {
            font-size: 1.2em;
            font-weight: 600;
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
        }

        .product-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            transition: all 0.3s;
            animation: fadeIn 0.5s;
            border-top: 3px solid #c62828;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(198, 40, 40, 0.3);
        }

        .product-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            background: #f5f5f5;
        }

        .product-content {
            padding: 20px;
        }

        .product-category {
            color: #1565c0;
            font-size: 0.85em;
            font-weight: 600;
            text-transform: uppercase;
            margin-bottom: 8px;
        }

        .product-name {
            font-size: 1.3em;
            font-weight: 700;
            color: #333;
            margin-bottom: 10px;
        }

        .product-description {
            color: #666;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .product-specs {
            margin-bottom: 15px;
        }

        .spec-tag {
            display: inline-block;
            background: #f0f0f0;
            padding: 4px 10px;
            border-radius: 5px;
            font-size: 0.85em;
            margin: 4px 4px 4px 0;
            color: #555;
        }

        .product-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 15px;
            border-top: 2px solid #f0f0f0;
        }

        .product-price {
            font-size: 1.8em;
            font-weight: 700;
            color: #c62828;
        }

        .product-types {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-bottom: 10px;
        }

        .type-badge {
            background: linear-gradient(135deg, #1565c0, #0277bd);
            color: white;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: 600;
        }

        .popular-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #c62828;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: 600;
            box-shadow: 0 2px 10px rgba(198, 40, 40, 0.5);
        }

        .product-image-container {
            position: relative;
        }

        /* Cart Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 15px;
            max-width: 900px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }

        .modal-header {
            background: linear-gradient(135deg, #c62828, #d32f2f);
            color: white;
            padding: 25px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 15px 15px 0 0;
        }

        .modal-header h2 {
            font-size: 1.8em;
        }

        .close-modal {
            background: none;
            border: none;
            color: white;
            font-size: 32px;
            cursor: pointer;
            padding: 0;
            width: 40px;
            height: 40px;
        }

        .modal-body {
            padding: 30px;
        }

        .cart-empty {
            text-align: center;
            padding: 60px 20px;
            color: #999;
        }

        .cart-empty-icon {
            font-size: 80px;
            margin-bottom: 20px;
        }

        .cart-item {
            display: flex;
            gap: 20px;
            padding: 20px;
            border: 2px solid #f0f0f0;
            border-radius: 10px;
            margin-bottom: 15px;
            transition: all 0.3s;
        }

        .cart-item:hover {
            border-color: #c62828;
            box-shadow: 0 2px 10px rgba(198, 40, 40, 0.1);
        }

        .cart-item-image {
            width: 100px;
            height: 100px;
            object-fit: cover;
            border-radius: 8px;
        }

        .cart-item-details {
            flex: 1;
        }

        .cart-item-name {
            font-size: 1.2em;
            font-weight: 700;
            color: #333;
            margin-bottom: 5px;
        }

        .cart-item-category {
            color: #1565c0;
            font-size: 0.9em;
            margin-bottom: 10px;
        }

        .cart-item-price {
            font-size: 1.3em;
            color: #c62828;
            font-weight: 700;
        }

        .cart-item-quantity {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }

        .qty-btn {
            background: #1565c0;
            color: white;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
        }

        .qty-btn:hover {
            background: #0d47a1;
        }

        .qty-display {
            font-size: 1.1em;
            font-weight: 600;
            min-width: 30px;
            text-align: center;
        }

        .remove-btn {
            background: #f44336;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9em;
            margin-top: 10px;
        }

        .remove-btn:hover {
            background: #d32f2f;
        }

        .cart-summary {
            background: #f5f5f5;
            padding: 25px;
            border-radius: 10px;
            margin-top: 30px;
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .summary-row.total {
            border-top: 2px solid #c62828;
            padding-top: 15px;
            font-size: 1.5em;
            font-weight: 700;
            color: #c62828;
        }

        .checkout-actions {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .btn-checkout {
            flex: 1;
            padding: 15px;
            font-size: 1.1em;
        }

        /* Checkout Form */
        .checkout-section {
            display: none;
        }

        .checkout-section.active {
            display: block;
        }

        .form-section {
            margin-bottom: 30px;
        }

        .form-section h3 {
            color: #c62828;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 15px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1em;
            font-family: inherit;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #c62828;
        }

        .form-group.full-width {
            grid-column: 1 / -1;
        }

        /* Order Confirmation */
        .confirmation {
            text-align: center;
            padding: 40px 20px;
        }

        .confirmation-icon {
            font-size: 80px;
            color: #4caf50;
            margin-bottom: 20px;
        }

        .confirmation h3 {
            font-size: 2em;
            color: #333;
            margin-bottom: 15px;
        }

        .confirmation p {
            font-size: 1.1em;
            color: #666;
            margin-bottom: 10px;
        }

        .order-number {
            font-size: 1.5em;
            font-weight: 700;
            color: #c62828;
            margin: 20px 0;
        }

        /* AI Chat Assistant */
        .chat-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #c62828, #d32f2f);
            color: white;
            border: none;
            font-size: 28px;
            cursor: pointer;
            box-shadow: 0 4px 20px rgba(198, 40, 40, 0.5);
            transition: all 0.3s;
            z-index: 1000;
        }

        .chat-button:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 30px rgba(198, 40, 40, 0.7);
        }

        .chat-window {
            position: fixed;
            bottom: 100px;
            right: 30px;
            width: 350px;
            height: 500px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            display: none;
            flex-direction: column;
            z-index: 999;
            overflow: hidden;
        }

        .chat-window.active {
            display: flex;
        }

        .chat-header {
            background: linear-gradient(135deg, #c62828, #d32f2f);
            color: white;
            padding: 20px;
            font-weight: 600;
            font-size: 1.1em;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chat-close {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            padding: 0;
            width: 30px;
            height: 30px;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            background: #f5f5f5;
        }

        .message {
            margin-bottom: 15px;
            animation: slideIn 0.3s;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.bot {
            text-align: left;
        }

        .message.user {
            text-align: right;
        }

        .message-bubble {
            display: inline-block;
            padding: 12px 18px;
            border-radius: 18px;
            max-width: 80%;
            word-wrap: break-word;
        }

        .message.bot .message-bubble {
            background: white;
            color: #333;
            border: 1px solid #e0e0e0;
        }

        .message.user .message-bubble {
            background: linear-gradient(135deg, #c62828, #d32f2f);
            color: white;
        }

        .chat-input-area {
            padding: 15px;
            background: white;
            border-top: 1px solid #e0e0e0;
            display: flex;
            gap: 10px;
        }

        .chat-input {
            flex: 1;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 25px;
            font-size: 0.95em;
            outline: none;
        }

        .chat-input:focus {
            border-color: #c62828;
        }

        .chat-send {
            background: linear-gradient(135deg, #c62828, #d32f2f);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 18px;
            transition: all 0.3s;
        }

        .chat-send:hover {
            transform: scale(1.1);
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: 2em;
            }

            .filter-group {
                grid-template-columns: 1fr;
            }

            .products-grid {
                grid-template-columns: 1fr;
            }

            .chat-window {
                width: calc(100% - 40px);
                right: 20px;
                left: 20px;
                height: 400px;
            }

            .modal-content {
                max-width: 100%;
            }

            .cart-item {
                flex-direction: column;
            }

            .cart-button {
                top: 20px;
                right: 20px;
            }
        }
    </style>
</head>
<body>
    <!-- Shopping Cart Button -->
    <button class="cart-button" onclick="openCart()">
        üõí
        <span class="cart-badge" id="cartBadge">0</span>
    </button>

    <div class="container">
        <header>
            <h1>üî¥ Red Sea Tire</h1>
            <p>Find Your Perfect Tires & Services - Shop Online with Delivery</p>
        </header>

        <div class="filters">
            <h2>üîç Filter Tires & Services</h2>
            <div class="filter-group">
                <div class="filter-item">
                    <label for="categoryFilter">Category</label>
                    <select id="categoryFilter">
                        <option value="">All Categories</option>
                        <option value="passenger-tires">Passenger Car Tires</option>
                        <option value="suv-truck-tires">SUV & Truck Tires</option>
                        <option value="performance-tires">Performance Tires</option>
                        <option value="winter-tires">Winter Tires</option>
                        <option value="services">Tire Services</option>
                    </select>
                </div>

                <div class="filter-item">
                    <label for="vehicleFilter">Vehicle Type</label>
                    <select id="vehicleFilter">
                        <option value="">All Vehicles</option>
                        <option value="sedan">Sedan</option>
                        <option value="suv">SUV</option>
                        <option value="truck">Truck</option>
                        <option value="sports-car">Sports Car</option>
                        <option value="coupe">Coupe</option>
                        <option value="crossover">Crossover</option>
                    </select>
                </div>

                <div class="filter-item">
                    <label for="typeFilter">Tire Type</label>
                    <select id="typeFilter">
                        <option value="">All Types</option>
                        <option value="all-season">All-Season</option>
                        <option value="winter">Winter</option>
                        <option value="summer">Summer</option>
                        <option value="all-terrain">All-Terrain</option>
                        <option value="performance">Performance</option>
                    </select>
                </div>

                <div class="filter-item">
                    <label for="maxPrice">Max Price ($)</label>
                    <input type="number" id="maxPrice" placeholder="No limit" min="0" step="10">
                </div>
            </div>

            <div class="filter-buttons">
                <button class="btn btn-primary" onclick="applyFilters()">Apply Filters</button>
                <button class="btn btn-secondary" onclick="resetFilters()">Reset</button>
            </div>
        </div>

        <div class="results-header">
            <div class="results-count" id="resultsCount">Showing all products</div>
        </div>

        <div class="products-grid" id="productsGrid"></div>
    </div>

    <!-- Shopping Cart Modal -->
    <div class="modal" id="cartModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üõí Shopping Cart</h2>
                <button class="close-modal" onclick="closeCart()">√ó</button>
            </div>
            <div class="modal-body">
                <!-- Cart View -->
                <div id="cartView" class="cart-section active">
                    <div id="cartItems"></div>
                    <div id="cartSummary"></div>
                </div>

                <!-- Checkout Form -->
                <div id="checkoutView" class="checkout-section">
                    <form id="checkoutForm">
                        <div class="form-section">
                            <h3>üìç Delivery Information</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="firstName">First Name *</label>
                                    <input type="text" id="firstName" required>
                                </div>
                                <div class="form-group">
                                    <label for="lastName">Last Name *</label>
                                    <input type="text" id="lastName" required>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="email">Email *</label>
                                    <input type="email" id="email" required>
                                </div>
                                <div class="form-group">
                                    <label for="phone">Phone *</label>
                                    <input type="tel" id="phone" required>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group full-width">
                                    <label for="address">Street Address *</label>
                                    <input type="text" id="address" required>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="city">City *</label>
                                    <input type="text" id="city" required>
                                </div>
                                <div class="form-group">
                                    <label for="state">State *</label>
                                    <input type="text" id="state" required>
                                </div>
                                <div class="form-group">
                                    <label for="zipCode">ZIP Code *</label>
                                    <input type="text" id="zipCode" required>
                                </div>
                            </div>
                        </div>

                        <div class="form-section">
                            <h3>üöö Delivery Options</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="deliveryType">Delivery Type *</label>
                                    <select id="deliveryType" required>
                                        <option value="standard">Standard Delivery (5-7 days) - FREE</option>
                                        <option value="express">Express Delivery (2-3 days) - $25</option>
                                        <option value="rush">Rush Delivery (Next day) - $50</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group full-width">
                                    <label for="deliveryNotes">Delivery Notes (Optional)</label>
                                    <textarea id="deliveryNotes" rows="3" placeholder="Special instructions..."></textarea>
                                </div>
                            </div>
                        </div>

                        <div class="form-section">
                            <h3>üí≥ Payment Method</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="paymentMethod">Payment Method *</label>
                                    <select id="paymentMethod" required>
                                        <option value="credit">Credit Card</option>
                                        <option value="debit">Debit Card</option>
                                        <option value="paypal">PayPal</option>
                                        <option value="cod">Cash on Delivery</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="checkout-actions">
                            <button type="button" class="btn btn-secondary" onclick="showCart()">‚Üê Back to Cart</button>
                            <button type="submit" class="btn btn-primary btn-checkout">Complete Order</button>
                        </div>
                    </form>
                </div>

                <!-- Order Confirmation -->
                <div id="confirmationView" class="checkout-section">
                    <div class="confirmation">
                        <div class="confirmation-icon">‚úÖ</div>
                        <h3>Order Confirmed!</h3>
                        <p>Thank you for your order.</p>
                        <div class="order-number" id="orderNumber"></div>
                        <p>We've sent a confirmation email with tracking details.</p>
                        <p>Your tires will be delivered soon!</p>
                        <button class="btn btn-primary" onclick="closeCartAndReset()" style="margin-top: 30px;">Continue Shopping</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- AI Chat Assistant -->
    <button class="chat-button" onclick="toggleChat()" id="chatBtn">üí¨</button>
    <div class="chat-window" id="chatWindow">
        <div class="chat-header">
            <span>ü§ñ AI Tire Assistant</span>
            <button class="chat-close" onclick="toggleChat()">√ó</button>
        </div>
        <div class="chat-messages" id="chatMessages">
            <div class="message bot">
                <div class="message-bubble">
                    üëã Hi! I'm your Red Sea Tire AI assistant. I can help you find the perfect tires and answer questions about delivery. What can I help you with?
                </div>
            </div>
        </div>
        <div class="chat-input-area">
            <input type="text" class="chat-input" id="chatInput" placeholder="Type your question..." onkeypress="handleChatKeypress(event)">
            <button class="chat-send" onclick="sendMessage()">‚û§</button>
        </div>
    </div>

    <script>
        // Product Data
        const tireData = {
            categories: [
                {
                    id: 'passenger-tires',
                    name: 'Passenger Car Tires',
                    items: [
                        {
                            id: 1,
                            name: 'Michelin Defender T+H',
                            description: 'Premium all-season tire with 80,000 mile warranty. Excellent fuel efficiency and comfort',
                            price: 149.99,
                            image: 'https://images.unsplash.com/photo-1606577924006-27d39b132ae2?w=400&q=80',
                            type: ['all-season', 'passenger'],
                            vehicleType: ['sedan', 'coupe'],
                            specs: ['80,000 mile warranty', '700 AA UTQG', 'Fuel efficient'],
                            popular: true
                        },
                        {
                            id: 2,
                            name: 'Bridgestone Turanza QuietTrack',
                            description: 'Ultra-quiet all-season touring tire with superior wet traction',
                            price: 139.99,
                            image: 'https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=400&q=80',
                            type: ['all-season', 'touring'],
                            vehicleType: ['sedan', 'coupe'],
                            specs: ['QuietTrack Technology', 'Excellent wet grip', '70,000 mile warranty'],
                            popular: true
                        },
                        {
                            id: 3,
                            name: 'Continental PureContact LS',
                            description: 'Eco-friendly all-season tire with excellent ride comfort and handling',
                            price: 134.99,
                            image: 'https://images.unsplash.com/photo-1593941707882-a5bba14938c7?w=400&q=80',
                            type: ['all-season', 'eco'],
                            vehicleType: ['sedan', 'wagon'],
                            specs: ['EcoPlus Technology', 'Low rolling resistance', '70,000 mile warranty'],
                            popular: false
                        }
                    ]
                },
                {
                    id: 'suv-truck-tires',
                    name: 'SUV & Truck Tires',
                    items: [
                        {
                            id: 4,
                            name: 'Goodyear Wrangler All-Terrain',
                            description: 'Rugged all-terrain tire for on and off-road performance',
                            price: 189.99,
                            image: 'https://images.unsplash.com/photo-1619642751034-765dfdf7c58e?w=400&q=80',
                            type: ['all-terrain', 'off-road'],
                            vehicleType: ['suv', 'truck', 'jeep'],
                            specs: ['DuraWall Technology', 'Off-road traction', '60,000 mile warranty'],
                            popular: true
                        },
                        {
                            id: 5,
                            name: 'BFGoodrich All-Terrain T/A KO2',
                            description: 'Premium off-road tire with aggressive tread pattern',
                            price: 219.99,
                            image: 'https://images.unsplash.com/photo-1609521263047-f8f205293f24?w=400&q=80',
                            type: ['all-terrain', 'off-road'],
                            vehicleType: ['truck', 'jeep', 'suv'],
                            specs: ['CoreGard Technology', 'Mountain snowflake rated', '50,000 mile warranty'],
                            popular: true
                        },
                        {
                            id: 6,
                            name: 'Pirelli Scorpion Verde All Season Plus',
                            description: 'Luxury SUV tire with excellent comfort and fuel economy',
                            price: 174.99,
                            image: 'https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=400&q=80',
                            type: ['all-season', 'luxury'],
                            vehicleType: ['suv', 'crossover'],
                            specs: ['Eco-friendly compound', 'Low noise', '60,000 mile warranty'],
                            popular: true
                        }
                    ]
                },
                {
                    id: 'performance-tires',
                    name: 'Performance Tires',
                    items: [
                        {
                            id: 7,
                            name: 'Michelin Pilot Sport 4S',
                            description: 'Ultra-high performance summer tire for sports cars',
                            price: 289.99,
                            image: 'https://images.unsplash.com/photo-1606577924006-27d39b132ae2?w=400&q=80',
                            type: ['summer', 'performance', 'sport'],
                            vehicleType: ['sports-car', 'coupe', 'sedan'],
                            specs: ['Track-ready performance', 'Dynamic Response Technology', '30,000 mile warranty'],
                            popular: true
                        },
                        {
                            id: 8,
                            name: 'Continental ExtremeContact Sport',
                            description: 'Max performance summer tire with race-inspired technology',
                            price: 249.99,
                            image: 'https://images.unsplash.com/photo-1593941707882-a5bba14938c7?w=400&q=80',
                            type: ['summer', 'performance'],
                            vehicleType: ['sports-car', 'sedan'],
                            specs: ['SportPlus Technology', 'Excellent dry/wet grip', '30,000 mile warranty'],
                            popular: false
                        }
                    ]
                },
                {
                    id: 'winter-tires',
                    name: 'Winter Tires',
                    items: [
                        {
                            id: 9,
                            name: 'Bridgestone Blizzak WS90',
                            description: 'Premium winter tire with exceptional ice and snow traction',
                            price: 159.99,
                            image: 'https://images.unsplash.com/photo-1619642751034-765dfdf7c58e?w=400&q=80',
                            type: ['winter', 'snow'],
                            vehicleType: ['sedan', 'coupe', 'suv'],
                            specs: ['3PMSF certified', 'Multi-cell compound', 'Severe snow rated'],
                            popular: true
                        },
                        {
                            id: 10,
                            name: 'Nokian Hakkapeliitta R3',
                            description: 'Studless winter tire engineered for extreme cold',
                            price: 179.99,
                            image: 'https://images.unsplash.com/photo-1609521263047-f8f205293f24?w=400&q=80',
                            type: ['winter', 'studless'],
                            vehicleType: ['sedan', 'suv'],
                            specs: ['Arctic Grip Compound', 'Double block grip', 'Ice/snow champion'],
                            popular: false
                        }
                    ]
                },
                {
                    id: 'services',
                    name: 'Tire Services',
                    items: [
                        {
                            id: 11,
                            name: 'Tire Installation Package',
                            description: 'Complete tire installation with balancing, valve stems, and disposal',
                            price: 99.99,
                            image: 'https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=400&q=80',
                            type: ['service', 'installation'],
                            vehicleType: ['all'],
                            specs: ['Mount & balance', 'New valve stems', 'Old tire disposal', 'TPMS reset'],
                            popular: true
                        },
                        {
                            id: 12,
                            name: 'Wheel Alignment',
                            description: 'Precision 4-wheel alignment to extend tire life and improve handling',
                            price: 79.99,
                            image: 'https://images.unsplash.com/photo-1606577924006-27d39b132ae2?w=400&q=80',
                            type: ['service', 'maintenance'],
                            vehicleType: ['all'],
                            specs: ['Computerized alignment', 'Adjust camber/caster/toe', '12-month warranty'],
                            popular: true
                        },
                        {
                            id: 13,
                            name: 'Tire Rotation & Balance',
                            description: 'Rotate and balance all four tires to maximize tread life',
                            price: 49.99,
                            image: 'https://images.unsplash.com/photo-1593941707882-a5bba14938c7?w=400&q=80',
                            type: ['service', 'maintenance'],
                            vehicleType: ['all'],
                            specs: ['5-tire rotation available', 'Dynamic balancing', 'Torque to spec'],
                            popular: false
                        },
                        {
                            id: 14,
                            name: 'Flat Tire Repair',
                            description: 'Professional tire repair with rubber plug and patch',
                            price: 29.99,
                            image: 'https://images.unsplash.com/photo-1619642751034-765dfdf7c58e?w=400&q=80',
                            type: ['service', 'repair'],
                            vehicleType: ['all'],
                            specs: ['Rubber plug & patch', 'Leak test', 'Re-balance if needed'],
                            popular: true
                        }
                    ]
                }
            ]
        };

        // Shopping Cart
        let cart = [];

        // Flatten products
        let allProducts = [];
        tireData.categories.forEach(category => {
            category.items.forEach(item => {
                allProducts.push({
                    ...item,
                    categoryId: category.id,
                    categoryName: category.name
                });
            });
        });

        // Display products
        function displayProducts(products) {
            const grid = document.getElementById('productsGrid');
            const countEl = document.getElementById('resultsCount');
            
            if (products.length === 0) {
                grid.innerHTML = '<div style="grid-column: 1/-1; text-align: center; color: white; padding: 60px 20px; background: rgba(255,255,255,0.1); border-radius: 15px;">No products match your filters. Try adjusting your criteria.</div>';
                countEl.textContent = 'No results found';
                return;
            }

            countEl.textContent = `Showing ${products.length} product${products.length !== 1 ? 's' : ''}`;
            
            grid.innerHTML = products.map(product => `
                <div class="product-card">
                    <div class="product-image-container">
                        <img src="${product.image}" alt="${product.name}" class="product-image">
                        ${product.popular ? '<div class="popular-badge">‚≠ê Popular</div>' : ''}
                    </div>
                    <div class="product-content">
                        <div class="product-category">${product.categoryName}</div>
                        <div class="product-name">${product.name}</div>
                        <div class="product-types">
                            ${product.type.map(t => `<span class="type-badge">${t}</span>`).join('')}
                        </div>
                        <div class="product-description">${product.description}</div>
                        <div class="product-specs">
                            ${product.specs.map(spec => `<span class="spec-tag">${spec}</span>`).join('')}
                        </div>
                        <div class="product-footer">
                            <div class="product-price">$${product.price.toFixed(2)}</div>
                            <button class="btn-add-cart" onclick="addToCart(${product.id})">Add to Cart</button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // Filter functions
        function applyFilters() {
            const category = document.getElementById('categoryFilter').value;
            const vehicle = document.getElementById('vehicleFilter').value;
            const type = document.getElementById('typeFilter').value;
            const maxPrice = document.getElementById('maxPrice').value;

            let filtered = allProducts.filter(product => {
                if (category && product.categoryId !== category) return false;
                if (vehicle && !product.vehicleType.includes(vehicle) && !product.vehicleType.includes('all')) return false;
                if (type && !product.type.includes(type)) return false;
                if (maxPrice && product.price > parseFloat(maxPrice)) return false;
                return true;
            });

            displayProducts(filtered);
        }

        function resetFilters() {
            document.getElementById('categoryFilter').value = '';
            document.getElementById('vehicleFilter').value = '';
            document.getElementById('typeFilter').value = '';
            document.getElementById('maxPrice').value = '';
            displayProducts(allProducts);
        }

        // Shopping cart functions
        function addToCart(productId) {
            const product = allProducts.find(p => p.id === productId);
            const existingItem = cart.find(item => item.id === productId);
            
            if (existingItem) {
                existingItem.quantity++;
            } else {
                cart.push({...product, quantity: 1});
            }
            
            updateCartBadge();
            showCartNotification();
        }

        function removeFromCart(productId) {
            cart = cart.filter(item => item.id !== productId);
            updateCartBadge();
            renderCart();
        }

        function updateQuantity(productId, change) {
            const item = cart.find(item => item.id === productId);
            if (item) {
                item.quantity += change;
                if (item.quantity <= 0) {
                    removeFromCart(productId);
                } else {
                    updateCartBadge();
                    renderCart();
                }
            }
        }

        function updateCartBadge() {
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            document.getElementById('cartBadge').textContent = totalItems;
        }

        function showCartNotification() {
            const badge = document.getElementById('cartBadge');
            badge.style.animation = 'none';
            setTimeout(() => {
                badge.style.animation = 'pulse 0.5s';
            }, 10);
        }

        function openCart() {
            document.getElementById('cartModal').classList.add('active');
            showCart();
        }

        function closeCart() {
            document.getElementById('cartModal').classList.remove('active');
        }

        function showCart() {
            document.getElementById('cartView').classList.add('active');
            document.getElementById('checkoutView').classList.remove('active');
            document.getElementById('confirmationView').classList.remove('active');
            renderCart();
        }

        function showCheckout() {
            document.getElementById('cartView').classList.remove('active');
            document.getElementById('checkoutView').classList.add('active');
            document.getElementById('confirmationView').classList.remove('active');
        }

        function renderCart() {
            const cartItemsEl = document.getElementById('cartItems');
            const cartSummaryEl = document.getElementById('cartSummary');

            if (cart.length === 0) {
                cartItemsEl.innerHTML = `
                    <div class="cart-empty">
                        <div class="cart-empty-icon">üõí</div>
                        <h3>Your cart is empty</h3>
                        <p>Add some tires to get started!</p>
                    </div>
                `;
                cartSummaryEl.innerHTML = '';
                return;
            }

            cartItemsEl.innerHTML = cart.map(item => `
                <div class="cart-item">
                    <img src="${item.image}" alt="${item.name}" class="cart-item-image">
                    <div class="cart-item-details">
                        <div class="cart-item-name">${item.name}</div>
                        <div class="cart-item-category">${item.categoryName}</div>
                        <div class="cart-item-price">$${item.price.toFixed(2)}</div>
                        <div class="cart-item-quantity">
                            <button class="qty-btn" onclick="updateQuantity(${item.id}, -1)">-</button>
                            <span class="qty-display">${item.quantity}</span>
                            <button class="qty-btn" onclick="updateQuantity(${item.id}, 1)">+</button>
                        </div>
                        <button class="remove-btn" onclick="removeFromCart(${item.id})">Remove</button>
                    </div>
                </div>
            `).join('');

            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const tax = subtotal * 0.08;
            const total = subtotal + tax;

            cartSummaryEl.innerHTML = `
                <div class="cart-summary">
                    <div class="summary-row">
                        <span>Subtotal:</span>
                        <span>$${subtotal.toFixed(2)}</span>
                    </div>
                    <div class="summary-row">
                        <span>Tax (8%):</span>
                        <span>$${tax.toFixed(2)}</span>
                    </div>
                    <div class="summary-row">
                        <span>Delivery:</span>
                        <span id="deliveryFee">FREE</span>
                    </div>
                    <div class="summary-row total">
                        <span>Total:</span>
                        <span id="totalAmount">$${total.toFixed(2)}</span>
                    </div>
                    <div class="checkout-actions">
                        <button class="btn btn-secondary" onclick="closeCart()">Continue Shopping</button>
                        <button class="btn btn-primary btn-checkout" onclick="showCheckout()">Proceed to Checkout</button>
                    </div>
                </div>
            `;
        }

        // Checkout form
        document.getElementById('checkoutForm').addEventListener('submit', function(e) {
            e.preventDefault();
            completeOrder();
        });

        function completeOrder() {
            const orderNum = 'RS' + Date.now().toString().slice(-8);
            document.getElementById('orderNumber').textContent = `Order #${orderNum}`;
            
            document.getElementById('checkoutView').classList.remove('active');
            document.getElementById('confirmationView').classList.add('active');
        }

        function closeCartAndReset() {
            cart = [];
            updateCartBadge();
            closeCart();
            document.getElementById('checkoutForm').reset();
        }

        // Chat functions
        function toggleChat() {
            document.getElementById('chatWindow').classList.toggle('active');
        }

        function handleChatKeypress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (message === '') return;

            addMessage(message, 'user');
            input.value = '';

            setTimeout(() => {
                const response = generateAIResponse(message);
                addMessage(response, 'bot');
            }, 500);
        }

        function addMessage(text, type) {
            const messagesContainer = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${type}`;
            messageDiv.innerHTML = `<div class="message-bubble">${text}</div>`;
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function generateAIResponse(userMessage) {
            const lowerMessage = userMessage.toLowerCase();

            // Delivery questions
            if (lowerMessage.includes('deliver') || lowerMessage.includes('shipping')) {
                return "üöö We offer 3 delivery options:<br>‚Ä¢ <strong>Standard</strong> (5-7 days) - FREE<br>‚Ä¢ <strong>Express</strong> (2-3 days) - $25<br>‚Ä¢ <strong>Rush</strong> (Next day) - $50<br>All orders include installation at your location!";
            }
            if (lowerMessage.includes('install') && !lowerMessage.includes('package')) {
                return "üîß Yes! All tire purchases include professional installation at your delivery address. We mount, balance, and dispose of old tires!";
            }

            // Vehicle types
            if (lowerMessage.includes('suv') || lowerMessage.includes('truck')) {
                return "üöô For SUVs and trucks, I recommend our <strong>Goodyear Wrangler All-Terrain</strong> ($189.99) or <strong>BFGoodrich All-Terrain T/A KO2</strong> ($219.99). Both offer excellent off-road performance! Click Add to Cart to order with delivery.";
            }
            if (lowerMessage.includes('sedan') || lowerMessage.includes('car')) {
                return "üöó For sedans, our <strong>Michelin Defender T+H</strong> ($149.99) is very popular with an 80,000 mile warranty and excellent fuel efficiency! Add it to your cart for delivery.";
            }

            // Season types
            if (lowerMessage.includes('winter') || lowerMessage.includes('snow')) {
                return "‚ùÑÔ∏è For winter conditions, I recommend the <strong>Bridgestone Blizzak WS90</strong> ($159.99). It's 3PMSF certified with exceptional ice and snow traction! We can deliver and install them for you.";
            }

            // Shopping
            if (lowerMessage.includes('cart') || lowerMessage.includes('checkout') || lowerMessage.includes('buy')) {
                return "üõí To purchase: Click 'Add to Cart' on any tire, then click the cart icon (üõí) in the top-right. You'll fill in your delivery address and we'll bring them to you!";
            }
            if (lowerMessage.includes('payment') || lowerMessage.includes('pay')) {
                return "üí≥ We accept Credit/Debit cards, PayPal, and Cash on Delivery. Choose your preferred payment method during checkout!";
            }

            // General
            if (lowerMessage.includes('hi') || lowerMessage.includes('hello')) {
                return "üëã Hello! I can help you find tires and answer questions about delivery. What type of vehicle do you drive?";
            }

            return "ü§î I can help you find perfect tires with home delivery! Tell me your vehicle type (sedan, SUV, truck) or ask about delivery options. You can also browse and add items to your cart!";
        }

        // Initialize
        displayProducts(allProducts);
    </script>
</body>
</html>
